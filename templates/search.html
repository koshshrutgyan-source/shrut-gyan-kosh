{% extends "base.html" %}
{% block content %}
  <h1 class="text-3xl font-bold mb-6">🔍 Search Books</h1>

  <form method="GET" action="/search" style="margin-bottom: 20px;">
    <input type="text" name="q" value="{{ query or '' }}" 
           placeholder="Enter book title, author, or language"
           style="padding:10px; border-radius:8px; border:1px solid #ccc; width:70%;">
    <button type="submit"
            style="padding:10px 20px; border:none; border-radius:8px; background:#007bff; color:white; cursor:pointer; transition:0.3s;">
      Search
    </button>
  </form>

  {% if results %}
    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px;">
      {% for book in results %}
        <div style="background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.1); transition:transform 0.3s;"
             onmouseover="this.style.transform='scale(1.05)'" 
             onmouseout="this.style.transform='scale(1)'">
          <h3 style="margin:0; color:#007bff;">📖 {{ book['Name Of Book'] }}</h3>
          <p><strong>✍️ Author:</strong> {{ book['Writter Name'] }}</p>
          <p><strong>🌐 Language:</strong> {{ book['Langauge/ Script'] }}</p>
          <a href="{{ book['File link'] }}" target="_blank"
             style="display:inline-block; margin-top:10px; padding:8px 15px; border-radius:8px; background:#28a745; color:white; text-decoration:none; transition:0.3s;">
            📥 Download
          </a>
        </div>
      {% endfor %}
    </div>

    <div style="margin-top:20px; text-align:center;">
      {% if page > 1 %}
        <a href="{{ url_for('search', q=query, page=page-1) }}" style="margin-right:15px;">⬅️ Previous</a>
      {% endif %}

      <span>Page {{ page }} of {{ (total // per_page) + (1 if total % per_page else 0) }}</span>

      {% if page * per_page < total %}
        <a href="{{ url_for('search', q=query, page=page+1) }}" style="margin-left:15px;">Next ➡️</a>
      {% endif %}
    </div>
  {% endif %}
{% endblock %}
